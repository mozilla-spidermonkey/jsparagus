var _tmrs=_tmrs||[];
(function(){function x(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function Y(a){for(var b="",c,d=0;d<a;d++)c=16*Math.random()|0,b+=c.toString(16);return b}function q(){return(new Date).getTime()}function sa(){var a="tmr"+(""+Math.random()).slice(2);try{return F.setItem(a,a),F.removeItem(a),!0}catch(b){return!1}}function S(a){try{return F.getItem(Z+"_"+
a)}catch(b){}return null}function C(a,b){try{F.setItem(Z+"_"+a,b)}catch(c){}}function $(a){var b=";e="+escape("detect");n(s(a,!0,!1,!1)+b)}function k(){}function G(a){a&&"object"===typeof a&&(!u&&"id"in a)&&(u=a.id)}function aa(a){return a||"https:"==document.location.protocol||"chrome-extension:"==document.location.protocol?"https:":"http:"}function ta(a){return(a=!v?void 0:v[a])&&T?a-T:void 0}function ba(){if(v){for(var a=0,b="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
c=0;c<b.length;c++){var d=!v?void 0:v[b[c]];if(0<d&&(d<a||0==a))a=d}return a?a:void 0}}function n(a){var b=aa(D)+"//mytopf.com"+a;"function"===typeof navigator.sendBeacon&&!0===navigator.sendBeacon(b)||(a=new Image,a.src=b)}function H(a,b,c){if(!(b&&"object"===typeof b))return m&&console.warn("[TopMailRu]: Invalid event of "+a),null;var d={name:a,title:c.title||null};"id"in c&&!1!==c.id&&(d.id="id"in b&&b.id,!0!==c.id&&(d.id=d.id||c.id));if(m){var e=ca(b,{params:c.required,fn:c.fn});if(e.missed.length)return console.warn("[TopMailRu]"+
(d.id?"["+d.id+"]":"")+": Unspecified "+(1<e.missed.length&&e.missed.slice(0,-1).join(", ")+" and "||"")+e.missed.slice(-1)+" in "+a),null;var l=ca(b,{params:c.optional,fn:c.fn}),f=[].concat(e.values).concat(l.values),e=[].concat(e.missed).concat(l.missed);c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?f.push("value: "+b):e.push("value"));d.value=f.length?"{ "+f.join(", ")+" }":"";d.empty=e.length?"("+(1<e.length?e.slice(0,-1).join(", ")+" and "+e.slice(-1)+" are":e.slice(-1)+" is")+
" empty)":""}return"id"in c&&!1!==c.id&&!d.id?(m&&console.warn("[TopMailRu]: Undefined counter ID of "+a+" "+d.value),null):d}function ca(a,b){var c=[],d=[],e,l;if(b.params)for(e in b.params)b.params.hasOwnProperty(e)&&!1!==b.params[e]&&(l=e in a&&a[e],!0!==b.params[e]&&(l=l||b.params[e]),l?c.push(e+': "'+(b.fn?b.fn.call(self,e,l):l)+'"'):d&&d.push(e));return{values:c,missed:d}}function I(a){console.info("[TopMailRu]["+a.id+"]: "+(a.title||a.name)+" "+a.value+" "+a.empty)}function s(a,b,c,d){w&&C(J,
++t);var e="id"in a?a.id:u,l="url"in a?a.url:location.href,f="referrer"in a?a.referrer:document.referrer,k="title"in a?a.title:document.title,g;g=U;null===g&&(g=ua());g=null!==g?g?1:0:null;var m="userid"in a?a.userid:y||0===y?y:void 0,h;h=[];u&&e!==u&&h.push("sec");h=h.join(",");var n=window.screen;a.start=ba();b=(b?"/tracker":"/counter")+"?js=13"+(e?";id="+escape(e):"")+(l?";u="+escape(l):"")+(f?";r="+escape(f):"")+(a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+
("age"in a?";age="+escape(a.age):"")+("pid"in a?";pid="+escape(a.pid):"")+(void 0!==m?";userid="+escape(m):"")+(d&&k?";title="+encodeURIComponent(k):"")+(n?";s="+n.width+"*"+n.height:"")+";vp=";e=d=0;document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(d=document.documentElement.clientWidth,e=document.documentElement.clientHeight):"number"==typeof window.innerWidth&&(d=window.innerWidth,e=window.innerHeight);b=b+(""+d+"*"+e)+";touch="+va+";hds="+
wa+";flash="+V+";sid="+da+";ver="+ea;if(c){if(!v||!W)c="";else{c=[];c.push(W.type);c.push(W.redirectCount);c.push(T);for(d=0;d<fa.length;d++)c.push(ta(fa[d]));c=c.join("/")}c=";nt="+c}else c="";c=b+c+("device"in a?";device="+escape(a.device):"");var p;if("params"in a){b=escape;if(a=a.params)if(d=typeof a,"number"===d||"boolean"===d||"string"===d||a.nodeType||a===a.window)p="";else{e=[];for(p in a)if(a.hasOwnProperty(p)){l=a[p];d=typeof l;if("string"===d)l='"'+l.replace(/[\"\']/g,"\\$&")+'"';else if(!("number"===
d||"boolean"===d))continue;e.push('"'+p+'":'+l)}p=!e.length?"":"{"+e.join(",")+"}"}else p="";p=";params="+b(p)}else p="";return c+p+(null!==g?";detect="+g:"")+(w?";lvid="+escape(w?""+K+":"+q()+":"+t+":"+L:""):"")+(h?";opts="+escape(h):"")+";_="+Math.random()}function ga(a){a=";e="+escape("PVT/"+a);for(var b=0;b<g.length;b++)n(s(g[b],!0,!1,!0)+a)}function xa(){U=!0;ha(1);if(!ia&&!E){E=!0;for(var a=0;a<g.length;a++)$(g[a])}}function ya(){ha(0);U=!1}function ua(){var a;a=(a=ja.cookie.match(RegExp("(?:^|; )"+
ka.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null;if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=q()-b;if(0>b||b>la)return null;a=parseInt(a[0],10);return isNaN(a)?null:a}function ha(a){var b=q(),b=[a,b].join("|"),c=ka;a={path:"/",expires:la};var d=a.expires;"number"===typeof a.expires&&(d=new Date,d.setTime(d.getTime()+a.expires));d&&d.toUTCString&&(d=d.toUTCString());a.expires=d;var b=c+"="+encodeURIComponent(b),e;for(e in a)b+=
"; "+e,c=a[e],!0!==c&&(b+="="+c);ja.cookie=b}function M(){document.addEventListener?(B(document,"DOMContentLoaded",M),_tmrs.onready()):document.attachEvent&&"complete"===document.readyState&&(B(document,"readystatechange",M),_tmrs.onready())}function ma(){B(window,"load",ma);_tmrs.onready();_tmrs.onload()}function N(){B(window,"unload",N);B(window,"beforeunload",N);_tmrs.unload()}if("[object Array]"===Object.prototype.toString.call(_tmrs)){var f=window,h=navigator,ja=document,F=window.localStorage||
null,Z="tmr",w=sa(),E=!1,U=null,la=864E5,ka="tmr_detect",za=function(){function a(a,c){var d=document.createElement("div");d.setAttribute("class",String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,109,109,98,108,111,99,107,32,98,45,98,97,110,110,101,114,32,98,45,109,101,100,105,97,45,98,97,110,110,101,114,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,109,101,100,105,117,109,95,114,101,99,116,97,110,103,108,101,
95,51,48,48,95,50,53,48,32,112,117,98,95,55,50,56,120,57,48,32,108,101,97,100,101,114,98,111,97,114,100,95,55,50,56,95,57,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,95,54,48,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,120,54,48,48,32,116,101,120,116,45,97,100,32,116,101,120,116,65,100,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,97,
100,95,116,101,120,116,32,97,100,95,116,101,120,116,32,98,97,110,110,101,114,95,116,101,120,116,32,116,101,120,116,45,98,97,110,110,101,114,32,98,45,114,98,32,114,98,45,115,108,111,116,32,98,45,112,114,111,109,111,45,97,100,32,105,45,98,114,97,110,100,105,110,103,32,98,114,97,110,100,105,110,103,45,112,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,98,45,109,105,109,105,99,45,97,100,118,32,112,109,45,116,111,111,108,98,97,114,95,95,98,97,110,110,101,114,32,114,98,95,98,111,100,121,
32,115,116,105,99,107,121,45,115,112,114,105,110,103,115,32,97,100,118,95,115,108,111,116,95,49,32,98,97,110,110,101,114,95,50,52,48,32,98,108,111,99,107,95,115,104,97,114,101,32,97,99,116,105,111,110,45,45,115,104,97,114,101,32,115,104,97,114,101,108,105,115,116,32,106,115,45,98,97,110,110,101,114,32,100,105,114,101,99,116,32,112,99,45,109,105,109,105,99,32,116,103,98,45,98,97,110,110,101,114,32,121,97,100,105,114,101,99,116,32,106,115,45,112,114,111,109,111,45,112,111,112,117,112,32,109,45,115,
117,98,115,99,114,105,112,116,105,111,110,32,112,45,116,97,114,103,101,116,32,112,45,100,105,114,101,99,116,104,97,99,107,32,114,98,45,102,108,111,97,116,105,110,103,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107));d.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");d.setAttribute("id","trg-b-banners-1");d.setAttribute("data-view","SlotView.mimic");this.bait=document.body.appendChild(d);
this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;this.loopNumber=0;this.fnPositive=a||null;this.fnNegative=c||null;var e=this;setTimeout(function(){e._checkBait.call(e)},1)}a.prototype._checkBait=function(){if(E)this._stop();else{var a=!1;null!==document.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||0==this.bait.offsetTop||0==this.bait.offsetWidth||
0==this.bait.clientHeight||0==this.bait.clientWidth?a=!0:void 0!==window.getComputedStyle&&(a=window.getComputedStyle(this.bait,null),a="none"==a.getPropertyValue("display")||"hidden"==a.getPropertyValue("visibility"));(!0===a||10<=++this.loopNumber)&&this._stop();if(a&&this.fnPositive)try{this.fnPositive()}catch(c){}else if(!a&&10>this.loopNumber){var d=this;setTimeout(function(){d._checkBait.call(d)},50*this.loopNumber)}else try{this.fnNegative()}catch(e){}}};a.prototype._stop=function(){try{document.body.removeChild(this.bait)}catch(a){}};
return function(b,c){new a(b,c)}}(),ea="60.0.1",X=0,O=0,da=Y(16),y=null,P=0,J="reqNum",t=w&&S(J);null===t?(t=0,w&&C(J,t)):t=parseInt(t,10);var L=w&&S("lvid"),K=w&&S("lvidTS");if(null===L||null===K)L=Y(32),K=""+q(),t=0,w&&(C("lvid",L),C("lvidTS",K),C(J,t));var u=0,g=[],Q=[],R=[],r="string"===typeof location.hostname&&(-1!=location.hostname.search(/(^|\.)odnoklassniki\.ru$/)||-1!=location.hostname.search(/(^|\.)ok\.ru$/)),D="string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)vk\.com$/),
z="string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)lamoda\.ru$/),Aa="string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)kommersant\.ru$/),Ba="string"===typeof location.search&&-1!=location.search.search(/[?&]rb_clickid=/),m="string"===typeof location.search&&-1!=location.search.search(/[?&]tmr_debug=1(?:&|$)/),na=r||D||z||Aa,Ca=!Ba,Da=r||D,Ea=r||D,oa=r||D,ia=!1,va="ontouchstart"in f||1<(h.maxTouchPoints||h.msMaxTouchPoints)?"1":"0",wa=window.devicePixelRatio||
0,V="";if(h.plugins&&h.plugins["Shockwave Flash"])V=h.plugins["Shockwave Flash"].description.split(" ")[2];else if(window.ActiveXObject)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),A=A.GetVariable("$version"),A=A.split(" ")[1].split(","),V=A[0]+"."+A[1]}catch(Fa){}var f=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},v=f.timing||{},W=f.navigation||{},fa="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
T=!v?void 0:v.navigationStart;k.prototype.pageView=function(a){G(a);var b;if(b=a&&"object"===typeof a)if(b="id"in a)if(b=5>Q.length){b:{for(b=0;b<Q.length;b++)if(Q[b]===a.id){b=!0;break b}b=!1}b=!b}b&&(Q.push(a.id),!1!==a.beat&&R.push(a.id),g.push(a),E&&$(a));if(b=H("pageView",a,{title:"Page view",id:!0,optional:{url:location.href}}))n(s(a,!1,!1,!0)),O=q(),m&&I(b)};k.prototype.reachGoal=function(a){G(a);var b=H("reachGoal",a,{title:"Reach goal",id:u,value:!0,required:{goal:!0},optional:null,fn:null});
if(b&&"goal"in a&&a.goal){var c="";"value"in a&&a.value&&(c=parseInt(a.value)||"");n(s(a,!0,!1,!0)+(";e="+escape("RG:"+c+"/"+a.goal)));m&&I(b)}};k.prototype.itemView=function(a){var b=H("itemView",a,{title:"Item view",id:u,optional:{list:!0,productid:!0,pagetype:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(b){var c=a.list||"",d=a.productid||"",e=a.pagetype||"",f=a.totalvalue||0;(new Image).src=aa(0)+"//ad.mail.ru/retarget/?counter="+b.id+"&list="+c+"&productid="+d+"&pagetype="+
e+"&totalvalue="+f+"&_="+Math.random();c="IV:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+(""+e).replace(/;/g," ");n(s(a,!0,!1,!1)+(";e="+escape(c)));m&&I(b)}};k.prototype.sendEvent=function(a){G(a);var b=H("sendEvent",a,{title:"Send event",id:u,value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substr(0,300).replace(/;/g," ")}});if(b&&"category"in a&&a.category&&"action"in a&&a.action){var c=(""+a.category).substr(0,300),d=(""+a.action).substr(0,
300),e="";"label"in a&&a.label&&(e=(""+a.label).substr(0,300));var f="";"value"in a&&a.value&&(f=parseInt(a.value)||"");c="CE:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+(""+e).replace(/;/g," ");n(s(a,!0,!1,!1)+(";e="+escape(c)));m&&I(b)}};k.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?m&&console.warn("[TopMailRu]: Invalid user ID in setUserID"):(y=a,m&&console.info("[TopMailRu]: Global user ID = "+
y))}};k.prototype.deleteUserID=function(){y=null;m&&console.info("[TopMailRu]: Reset global user ID to null")};k.prototype.processEvent=function(a){if(a&&"object"===typeof a)if("type"in a)switch(a.type){case "pageView":this.pageView(a);break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID()}else m&&console.warn("[TopMailRu]: Unspecified push event type");
else m&&console.warn("[TopMailRu]: Invalid push event")};k.prototype.push=function(a){for(var b=0,c=arguments.length;b<c;b++)this.processEvent(arguments[b])};var pa=!1;k.prototype.onready=function(){pa||(pa=!0,!ia&&!E&&za(xa,ya))};var qa=!1;k.prototype.onload=function(){if(!qa){qa=!0;P=q();if(!Ea&&0<g.length){for(var a=";e="+escape("RT/load")+";et="+P,b=0;b<g.length;b++)n(s(g[b],!0,!0,!1)+a);O=P}Ca||setTimeout(function(){ga(2)},2E3);Da||setTimeout(function(){ga(15)},15E3)}};k.prototype.beat=function(){if(!na&&
X){var a=q();if(!(12E4<a-X)){if(12E4<a-O)for(var b=";e="+escape("RT/resend")+";et="+P,c=0;c<g.length;c++)!1!==g[c].beat&&n(s(g[c],!0,!1,!0)+b);else 0<R.length&&n("/tracker?js=13;id="+R[0]+";e="+escape("RT/beat")+";sid="+da+";ids="+R.join()+";ver="+ea+";_="+Math.random());O=a}}};var ra=!1;k.prototype.unload=function(){if(!ra&&(ra=!0,!oa)){var a;a=(a=ba())?q()-a:void 0;a=";e="+escape("RT/unload")+";et="+q()+(a?";pvt="+escape(a):"");for(var b=0;b<g.length;b++)n(s(g[b],!0,!1,!1)+a)}};k.prototype.activity=
function(a){X=q()};h=new k;f=0;for(r=_tmrs.length;f<r;f++)(z=_tmrs[f])&&"object"===typeof z&&G(z);f=0;for(r=_tmrs.length;f<r;f++)z=_tmrs[f],h.processEvent(z);_tmrs=h;if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)_tmrs.onready();else document.addEventListener?x(document,"DOMContentLoaded",M):document.attachEvent&&x(document,"readystatechange",M);if("complete"===document.readyState)_tmrs.onload();else x(window,"load",ma);oa||(x(window,"unload",
N),x(window,"beforeunload",N));if(!na){setInterval(_tmrs.beat,6E4);try{h="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" ");r=function(a){x(document,a,function(){_tmrs.activity(a)})};for(f=0;f<h.length;f++)r(h[f]);x(window,"scroll",function(){_tmrs.activity("scallback")})}catch(Ga){}}}})();
